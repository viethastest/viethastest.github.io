(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{GiqR:function(t,e,n){"use strict";n.r(e),e.default='<div class="admin-chat-center">\r\n    <mat-toolbar class="bg-white border-bottom admin-chat-toobar">\r\n        <mat-toolbar-row>\r\n            <span class="h2">Chat</span>\r\n        </mat-toolbar-row>\r\n    </mat-toolbar>\r\n\r\n    <div class="row admin-chat-body" *ngIf="listUser.length">\r\n        <div class="col-4 admin-chat-list">\r\n            <ul id="list-customer" class="list-group overflow-auto">\r\n                <li class="list-group-item d-flex align-items-center" *ngFor="let user of listUser"\r\n                    [ngStyle]="{\'backgroundColor\': userChoice.id == user.id ?  \'#f3f5f2\' : \'white\', \'cursor\': \'pointer\'}"\r\n                    (click)="selectUser(user)">\r\n                    <img src="https://image.flaticon.com/icons/png/512/168/168726.png" class="rounded float-left mr-2"\r\n                        style="width: 20%;" alt="avatar">\r\n                    <div>\r\n                        <p class="h4 text-body">Email: {{user.email}}</p>\r\n                        <p class="h5 text-body">S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: {{user.phone}}</p>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n\r\n        <div id="admin-chat-type" class="col-8">\r\n\r\n            <div id="admin-chat-type-content" class="overflow-auto">\r\n                <div class="content_chat my-1">\r\n                    <div class="form_content">\r\n\r\n                        <div [ngClass]="mess.align == \'left\' ? \'mess_admin\' : \'mess_customer\'"\r\n                            *ngFor="let mess of listMessage ? listMessage : []">\r\n                            <div class="row m-0" [ngClass]="mess.align == \'right\' ? \'justify-content-end\' : \'\'">\r\n                                <div class="col-8 px-0 pt-2" [ngClass]="mess.align == \'right\' ? \'pr-2\' : \'\' "\r\n                                    style="align-self: center;"\r\n                                    [ngStyle]="{\'textAlign\': mess.align == \'right\'  ? \'-webkit-right\' : \'-webkit-left\'}">\r\n                                    <div class="content p-1 text-left" style="width: fit-content">\r\n                                        {{mess.msg}}\r\n                                    </div>\r\n                                    <p>\r\n                                        {{mess.date.toDate() | date: \'dd/MM/yyyy HH:mm\'}}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            \x3c!-- Form chat --\x3e\r\n            <div id="admin-chat-type-send" class="footer_chat">\r\n                <div class="row input_mess mx-0 px-0">\r\n                    <div class="col px-0">\r\n                        <div class="input-group mb-3">\r\n                            <div class="input-group-prepend">\r\n                                <button class="btn btn-outline-secondary" type="button" (click)="scrollBottom()">\r\n                                    <i class="fa fa-picture-o" style="font-size: 1.2rem"></i>\r\n                                </button>\r\n                            </div>\r\n                            <input [(ngModel)]="message" style="border-right: none;" type="text" (keyup)="send($event)"\r\n                                class="form-control" placeholder="Nh\u1eadp tin nh\u1eafn...">\r\n                            <div class="input-group-append">\r\n                                <button class="btn btn-outline-secondary" type="button" (click)="sendChat()">\r\n                                    <img class="icon_1" src="assets/icon/send.svg" />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},R3Qk:function(t,e,n){"use strict";n.r(e),n.d(e,"ChatModule",(function(){return h}));var s=n("mrSG"),r=n("fXoL"),i=n("ofXK"),o=n("adls"),a=n("tyNb");let l=class{constructor(t,e,n,s){this.ordinaryQuery=t,this.ordinaryAlgorithm=e,this.firebaseAuth=n,this.router=s,this.listUser=[],this.message="",this.index=0}ngOnInit(){this.firebaseAuth.user.id?this.getListUser():this.router.navigate(["viethas/login"])}ngAfterViewChecked(){this.listUser.length&&(document.getElementById("list-customer").style.height=document.querySelector(".router").clientHeight-65-document.querySelector(".admin-chat-center .admin-chat-toobar").clientHeight+"px",document.getElementById("admin-chat-type").style.height=document.getElementById("list-customer").style.height,document.getElementById("admin-chat-type-content").style.height=document.getElementById("list-customer").offsetHeight-document.getElementById("admin-chat-type-send").offsetHeight+"px")}getListUser(){}selectUser(t){this.userChoice=t,this.callBackMessage({phone:t.phone,email:t.email})}callBackMessage(t){this.ordinaryQuery.callbackMessages_ADMIN(t=>Object(s.__awaiter)(this,void 0,void 0,(function*(){console.log(t),t.empty||(this.listMessage=yield t.docs.reverse().map(t=>Object.assign(Object.assign({id:t.id},t.data()),{dateOn:!1})),console.log(this.listMessage),this.ordinaryAlgorithm.waitingStack().then(()=>this.scrollBottom()))})),t,100)}send(t){13==t.keyCode&&(this.index||this.sendChat(),this.index+=1)}sendChat(){this.ordinaryQuery.sendMessage_ADMIN({email:this.userChoice.email,phone:this.userChoice.phone,message:this.message}).then(t=>{console.log(t),this.message="",this.index=0})}scrollBottom(){document.getElementById("admin-chat-type-content").scrollTop=document.getElementById("admin-chat-type-content").scrollHeight}};l.ctorParameters=()=>[{type:o.OrdinaryQuery},{type:o.OrdinaryAlgorithm},{type:o.FirebaseAuth},{type:a.e}],l=Object(s.__decorate)([Object(r.Component)({selector:"app-chat",template:Object(s.__importDefault)(n("GiqR")).default,styles:[Object(s.__importDefault)(n("qrgg")).default]})],l);var c=n("hctd"),d=n("3Pt+");const m=[{path:"",component:l}];let h=class{};h=Object(s.__decorate)([Object(r.NgModule)({declarations:[l],imports:[i.CommonModule,c.a,d.k,d.f,a.g.forChild(m)],exports:[a.g]})],h)},qrgg:function(t,e,n){"use strict";n.r(e),e.default=".mess_admin .row img {\n  border-radius: 100%;\n  margin-top: 10%;\n}\n.mess_admin .row .content {\n  height: auto;\n  background-color: #00000029;\n  border-radius: 5px;\n}\np {\n  color: #8e8e93;\n  font-size: 0.8rem;\n  margin-bottom: 0;\n}\n.mess_customer .content {\n  height: auto;\n  background-color: #3578e5;\n  color: #fff;\n  border-radius: 5px;\n}"}}]);