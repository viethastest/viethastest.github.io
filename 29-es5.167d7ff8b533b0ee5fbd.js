function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{GiqR:function(e,t,n){"use strict";n.r(t),t.default='<div class="admin-chat-center">\r\n    <mat-toolbar class="bg-white border-bottom admin-chat-toobar">\r\n        <mat-toolbar-row>\r\n            <span class="h2">Chat</span>\r\n        </mat-toolbar-row>\r\n    </mat-toolbar>\r\n\r\n    <div class="row admin-chat-body" *ngIf="listUser.length">\r\n        <div class="col-4 admin-chat-list">\r\n            <ul id="list-customer" class="list-group overflow-auto">\r\n                <li class="list-group-item d-flex align-items-center" *ngFor="let user of listUser"\r\n                    [ngStyle]="{\'backgroundColor\': userChoice.id == user.id ?  \'#f3f5f2\' : \'white\', \'cursor\': \'pointer\'}"\r\n                    (click)="selectUser(user)">\r\n                    <img src="https://image.flaticon.com/icons/png/512/168/168726.png" class="rounded float-left mr-2"\r\n                        style="width: 20%;" alt="avatar">\r\n                    <div>\r\n                        <p class="h4 text-body">Email: {{user.email}}</p>\r\n                        <p class="h5 text-body">S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: {{user.phone}}</p>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n\r\n        <div id="admin-chat-type" class="col-8">\r\n\r\n            <div id="admin-chat-type-content" class="overflow-auto">\r\n                <div class="content_chat my-1">\r\n                    <div class="form_content">\r\n\r\n                        <div [ngClass]="mess.align == \'left\' ? \'mess_admin\' : \'mess_customer\'"\r\n                            *ngFor="let mess of listMessage ? listMessage : []">\r\n                            <div class="row m-0" [ngClass]="mess.align == \'right\' ? \'justify-content-end\' : \'\'">\r\n                                <div class="col-8 px-0 pt-2" [ngClass]="mess.align == \'right\' ? \'pr-2\' : \'\' "\r\n                                    style="align-self: center;"\r\n                                    [ngStyle]="{\'textAlign\': mess.align == \'right\'  ? \'-webkit-right\' : \'-webkit-left\'}">\r\n                                    <div class="content p-1 text-left" style="width: fit-content">\r\n                                        {{mess.msg}}\r\n                                    </div>\r\n                                    <p>\r\n                                        {{mess.date.toDate() | date: \'dd/MM/yyyy HH:mm\'}}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            \x3c!-- Form chat --\x3e\r\n            <div id="admin-chat-type-send" class="footer_chat">\r\n                <div class="row input_mess mx-0 px-0">\r\n                    <div class="col px-0">\r\n                        <div class="input-group mb-3">\r\n                            <div class="input-group-prepend">\r\n                                <button class="btn btn-outline-secondary" type="button" (click)="scrollBottom()">\r\n                                    <i class="fa fa-picture-o" style="font-size: 1.2rem"></i>\r\n                                </button>\r\n                            </div>\r\n                            <input [(ngModel)]="message" style="border-right: none;" type="text" (keyup)="send($event)"\r\n                                class="form-control" placeholder="Nh\u1eadp tin nh\u1eafn...">\r\n                            <div class="input-group-append">\r\n                                <button class="btn btn-outline-secondary" type="button" (click)="sendChat()">\r\n                                    <img class="icon_1" src="assets/icon/send.svg" />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},R3Qk:function(e,t,n){"use strict";n.r(t),n.d(t,"ChatModule",(function(){return h}));var r=n("mrSG"),s=n("fXoL"),i=n("ofXK"),o=n("adls"),a=n("tyNb"),c=function(){function e(t,n,r,s){_classCallCheck(this,e),this.ordinaryQuery=t,this.ordinaryAlgorithm=n,this.firebaseAuth=r,this.router=s,this.listUser=[],this.message="",this.index=0}return _createClass(e,[{key:"ngOnInit",value:function(){this.firebaseAuth.user.id?this.getListUser():this.router.navigate(["viethas/login"])}},{key:"ngAfterViewChecked",value:function(){this.listUser.length&&(document.getElementById("list-customer").style.height=document.querySelector(".router").clientHeight-65-document.querySelector(".admin-chat-center .admin-chat-toobar").clientHeight+"px",document.getElementById("admin-chat-type").style.height=document.getElementById("list-customer").style.height,document.getElementById("admin-chat-type-content").style.height=document.getElementById("list-customer").offsetHeight-document.getElementById("admin-chat-type-send").offsetHeight+"px")}},{key:"getListUser",value:function(){}},{key:"selectUser",value:function(e){this.userChoice=e,this.callBackMessage({phone:e.phone,email:e.email})}},{key:"callBackMessage",value:function(e){var t=this;this.ordinaryQuery.callbackMessages_ADMIN((function(e){return Object(r.__awaiter)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e),t.t0=e.empty,t.t0){t.next=8;break}return t.next=5,e.docs.reverse().map((function(e){return Object.assign(Object.assign({id:e.id},e.data()),{dateOn:!1})}));case 5:this.listMessage=t.sent,console.log(this.listMessage),this.ordinaryAlgorithm.waitingStack().then((function(){return n.scrollBottom()}));case 8:case"end":return t.stop()}}),t,this)})))}),e,100)}},{key:"send",value:function(e){13==e.keyCode&&(this.index||this.sendChat(),this.index+=1)}},{key:"sendChat",value:function(){var e=this;this.ordinaryQuery.sendMessage_ADMIN({email:this.userChoice.email,phone:this.userChoice.phone,message:this.message}).then((function(t){console.log(t),e.message="",e.index=0}))}},{key:"scrollBottom",value:function(){document.getElementById("admin-chat-type-content").scrollTop=document.getElementById("admin-chat-type-content").scrollHeight}}]),e}();c.ctorParameters=function(){return[{type:o.OrdinaryQuery},{type:o.OrdinaryAlgorithm},{type:o.FirebaseAuth},{type:a.e}]},c=Object(r.__decorate)([Object(s.Component)({selector:"app-chat",template:Object(r.__importDefault)(n("GiqR")).default,styles:[Object(r.__importDefault)(n("qrgg")).default]})],c);var l=n("hctd"),d=n("3Pt+"),u=[{path:"",component:c}],h=function e(){_classCallCheck(this,e)};h=Object(r.__decorate)([Object(s.NgModule)({declarations:[c],imports:[i.CommonModule,l.a,d.k,d.f,a.g.forChild(u)],exports:[a.g]})],h)},qrgg:function(e,t,n){"use strict";n.r(t),t.default=".mess_admin .row img {\n  border-radius: 100%;\n  margin-top: 10%;\n}\n.mess_admin .row .content {\n  height: auto;\n  background-color: #00000029;\n  border-radius: 5px;\n}\np {\n  color: #8e8e93;\n  font-size: 0.8rem;\n  margin-bottom: 0;\n}\n.mess_customer .content {\n  height: auto;\n  background-color: #3578e5;\n  color: #fff;\n  border-radius: 5px;\n}"}}]);